"use strict";(self.webpackChunkrspamd_docs=self.webpackChunkrspamd_docs||[]).push([[9663],{14171:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"modules/mx_check","title":"MX Check module","description":"The MX Check module examines whether the domain in a message\'s SMTP FROM address (or the domain in HELO if SMTP FROM is empty) has at least one connectable MX. If a connectable MX is discovered, this data is stored in Redis.","source":"@site/docs/modules/mx_check.md","sourceDirName":"modules","slug":"/modules/mx_check","permalink":"/docs.rspamd.com/branches/preview-cleanup/ru/modules/mx_check","draft":false,"unlisted":false,"editUrl":"https://github.com/rspamd/docs.rspamd.com/edit/master/docs/modules/mx_check.md","tags":[],"version":"current","frontMatter":{"title":"MX Check module"},"sidebar":"docs","previous":{"title":"Multimap module","permalink":"/docs.rspamd.com/branches/preview-cleanup/ru/modules/multimap"},"next":{"title":"Neural network module","permalink":"/docs.rspamd.com/branches/preview-cleanup/ru/modules/neural"}}');var i=s(74848),d=s(28453);const r={title:"MX Check module"},c="MX Check module",o={},l=[];function a(e){const n={a:"a",code:"code",h1:"h1",header:"header",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,d.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"mx-check-module",children:"MX Check module"})}),"\n",(0,i.jsxs)(n.p,{children:["The MX Check module examines whether the domain in a message's SMTP FROM address (or the domain in HELO if SMTP FROM is empty) has at least one connectable MX. If a connectable MX is discovered, this data is stored in ",(0,i.jsx)(n.a,{href:"/configuration/redis",children:"Redis"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["To activate this module, modify ",(0,i.jsx)(n.code,{children:"enabled = true"})," in ",(0,i.jsx)(n.code,{children:"/etc/rspamd/local.d/mx_check.conf"})," and configure ",(0,i.jsx)(n.a,{href:"/configuration/redis",children:"redis"})," either for the entire system or for this specific module."]}),"\n",(0,i.jsxs)(n.p,{children:["Here is an example of the module configuration in ",(0,i.jsx)(n.code,{children:"local.d/mx_check.conf"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-hcl",children:'# Set this to enable the module\nenabled = true;\n# Module-specific redis-server configuration\n#servers = "localhost";\n\n# Increase timeout to avoid "MX_MISSING" false positives caused by tarpitting\n# (not recommended for heavily loaded server)\n#timeout = 10.0;\n\n# A map of specific domains that should be excluded from MX check\nexclude_domains = [\n    "https://maps.rspamd.com/freemail/disposable.txt.zst",\n    "https://maps.rspamd.com/freemail/free.txt.zst",\n    "${CONFDIR}/maps.d/maillist.inc",\n    "${CONFDIR}/maps.d/redirectors.inc",\n    "${CONFDIR}/maps.d/dmarc_whitelist.inc",\n    "${CONFDIR}/maps.d/surbl-whitelist.inc",\n    "${CONFDIR}/maps.d/spf_dkim_whitelist.inc",\n];\n'})}),"\n",(0,i.jsx)(n.p,{children:"Module default settings:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-hcl",children:'# This module is *DISABLED* by default\nenabled = false;\n# connection timeout in seconds\ntimeout = 1.0;\n# symbol yielded if no MX is connectable\nsymbol_bad_mx = "MX_INVALID";\n# symbol yielded if no MX is found\nsymbol_no_mx = "MX_MISSING";\n# symbol yielded if MX is connectable\nsymbol_good_mx = "MX_GOOD";\n# lifetime of redis cache - 1 day by default\nexpire = 86400;\n# lifetime of redis cache for no valid MXes - 2 hours by default\nexpire_novalid = 7200;\n# greylist first message with invalid MX (require greylist plugin)\ngreylist_invalid = true;\n# prefix used for redis key\nkey_prefix = "rmx";\n'})}),"\n",(0,i.jsx)(n.p,{children:"Symbols that are registered by the module:"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Group"}),(0,i.jsx)(n.th,{children:"Symbol"}),(0,i.jsx)(n.th,{children:"Description"}),(0,i.jsx)(n.th,{children:"Score"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"MX"}),(0,i.jsx)(n.td,{children:"MX_MISSING"}),(0,i.jsx)(n.td,{children:"Domain has no resolvable MX"}),(0,i.jsx)(n.td,{children:"3.5"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"MX"}),(0,i.jsx)(n.td,{children:"MX_INVALID"}),(0,i.jsx)(n.td,{children:"Domain has no working MX"}),(0,i.jsx)(n.td,{children:"0.5"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"MX"}),(0,i.jsx)(n.td,{children:"MX_GOOD"}),(0,i.jsx)(n.td,{children:"Domain has working MX"}),(0,i.jsx)(n.td,{children:"-0.01"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"MX"}),(0,i.jsx)(n.td,{children:"MX_WHITE"}),(0,i.jsx)(n.td,{children:"Domain is whitelisted from MX check"}),(0,i.jsx)(n.td,{children:"0.0"})]})]})]})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>c});var t=s(96540);const i={},d=t.createContext(i);function r(e){const n=t.useContext(d);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),t.createElement(d.Provider,{value:n},e.children)}}}]);